{% load sekizai_tags %}

{% addtoblock "js" %}<script type="text/javascript" src="//www.google.com/jsapi"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?sensor=false"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{ MEDIA_URL }}pollster/wok/js/wok.pollster.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="{{ MEDIA_URL }}pollster/wok/js/wok.pollster.charts.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}
<script type="text/javascript">
    wok.pollster.charts.init(function() {
        $(function() {
            wok.pollster.charts.createCharts('.survey-chart .chart');
        });
    });
</script>
{% endaddtoblock %}

<div class="survey-chart">
    {% if chart.has_data %}
    <div id="pollster-chart-{{ chart.id }}" class="chart chart-{{ chart.survey.shortname }}-{{ chart.shortname }}"
        data-chart-url="{% url pollster_chart_data chart.survey.shortname chart.shortname %}"
        data-chart-type="{{ chart.type.shortname }}">
    </div>
    {% else %}
    <div class="chart chart-{{ chart.survey.shortname }}-{{ chart.shortname }} chart-no-data">No available data</div>
    {% endif %}
</div>

